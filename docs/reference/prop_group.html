<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>prop_group — prop_group • fonctionr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="prop_group — prop_group"><meta name="description" content="Function to compare a proportion among different groups based on complex survey data. It produces a list containing a table, including the confidence intervals of the indicators, a ready-to-be published ggplot graphic and a Chi-Square statistical test (using survey::svychisq). Exporting those results to an Excell file is possible. The confidence intervals and the statistical test are taking into account the complex survey design. In case of facets, the Chi-square test is computed on the total proportion between facets (and not within facets). In case of second group (group.fill), no Chi-square test is computed."><meta property="og:description" content="Function to compare a proportion among different groups based on complex survey data. It produces a list containing a table, including the confidence intervals of the indicators, a ready-to-be published ggplot graphic and a Chi-Square statistical test (using survey::svychisq). Exporting those results to an Excell file is possible. The confidence intervals and the statistical test are taking into account the complex survey design. In case of facets, the Chi-square test is computed on the total proportion between facets (and not within facets). In case of second group (group.fill), no Chi-square test is computed."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fonctionr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/fonctionr_functions.html">Manuel</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/esthetic_functions.html">Fonctions esthétiques</a></li>
    <li><a class="dropdown-item" href="../articles/complex_design.html">Sondages avec design complexe</a></li>
    <li><a class="dropdown-item" href="../articles/Obss_colors.html">Couleurs pour l'Observatoire de la Santé et du Social</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../articles/changelog.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/jgires/fonctionr"><span class="fa fa-github fa-lg"></span> github</a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>prop_group</h1>
      <small class="dont-index">Source: <a href="https://github.com/jgires/fonctionr/blob/HEAD/R/prop_group.R" class="external-link"><code>R/prop_group.R</code></a></small>
      <div class="d-none name"><code>prop_group.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Function to compare a proportion among different groups based on complex survey data. It produces a list containing a table, including the confidence intervals of the indicators, a ready-to-be published ggplot graphic and a Chi-Square statistical test (using survey::svychisq). Exporting those results to an Excell file is possible. The confidence intervals and the statistical test are taking into account the complex survey design. In case of facets, the Chi-square test is computed on the total proportion between facets (and not within facets). In case of second group (group.fill), no Chi-square test is computed.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prop_group</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">group</span>,</span>
<span>  <span class="va">prop_exp</span>,</span>
<span>  group.fill <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  facet <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  filter_exp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  na.rm.group <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  na.rm.facet <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  na.prop <span class="op">=</span> <span class="st">"rm"</span>,</span>
<span>  total <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  prop_method <span class="op">=</span> <span class="st">"beta"</span>,</span>
<span>  reorder <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  show_ci <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  show_n <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  show_value <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  show_labs <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  total_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  scale <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  digits <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  unit <span class="op">=</span> <span class="st">"%"</span>,</span>
<span>  dec <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  col <span class="op">=</span> <span class="st">"deepskyblue3"</span>,</span>
<span>  pal <span class="op">=</span> <span class="st">"Coast"</span>,</span>
<span>  direction <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  desaturate <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  lighten <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  darken <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  dodge <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  font <span class="op">=</span> <span class="st">"Roboto"</span>,</span>
<span>  wrap_width_y <span class="op">=</span> <span class="fl">25</span>,</span>
<span>  wrap_width_leg <span class="op">=</span> <span class="fl">25</span>,</span>
<span>  legend_ncol <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  title <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  xlab <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ylab <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  legend_lab <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  caption <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lang <span class="op">=</span> <span class="st">"fr"</span>,</span>
<span>  theme <span class="op">=</span> <span class="st">"fonctionr"</span>,</span>
<span>  coef_font <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  export_path <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A dataframe or an object from the survey package or an object from the srvyr package.</p></dd>


<dt id="arg-group">group<a class="anchor" aria-label="anchor" href="#arg-group"></a></dt>
<dd><p>A variable defining the groups to be compared.</p></dd>


<dt id="arg-prop-exp">prop_exp<a class="anchor" aria-label="anchor" href="#arg-prop-exp"></a></dt>
<dd><p>An expression defining the proportion to be computed. Notice that if na.prop is "rm" any is.na() is not allowed in this argument. The removal of NA's is done before the computation of the proportion. Thus any function that takes into account NA's (e.g. 'in') will not work as designed in this argument, unless na.prop is set to "include".</p></dd>


<dt id="arg-group-fill">group.fill<a class="anchor" aria-label="anchor" href="#arg-group-fill"></a></dt>
<dd><p>A variable defining a second variable of groups to be compared.</p></dd>


<dt id="arg-facet">facet<a class="anchor" aria-label="anchor" href="#arg-facet"></a></dt>
<dd><p>A variable defining the faceting groups.</p></dd>


<dt id="arg-filter-exp">filter_exp<a class="anchor" aria-label="anchor" href="#arg-filter-exp"></a></dt>
<dd><p>An expression filtering the data, preserving the design.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>All options possible in as_survey_design in srvyr package.</p></dd>


<dt id="arg-na-rm-group">na.rm.group<a class="anchor" aria-label="anchor" href="#arg-na-rm-group"></a></dt>
<dd><p>TRUE if you want to remove observations with NA on the group and the group.fill variables. FALSE if you want to create a group with the NA values for the group variable and a group.fill with the NA values for the group.fill variable. Default is TRUE.</p></dd>


<dt id="arg-na-rm-facet">na.rm.facet<a class="anchor" aria-label="anchor" href="#arg-na-rm-facet"></a></dt>
<dd><p>TRUE if you want to remove observations with NA on the facet variable. FALSE if you want to create a facet with the NA values for the facet variable. Default is TRUE.</p></dd>


<dt id="arg-na-prop">na.prop<a class="anchor" aria-label="anchor" href="#arg-na-prop"></a></dt>
<dd><p>"rm" to remove observations with NA on one of the variables used in prop_exp before computing the proportions, "include" to compute the proportions with the NA's in the denominators. Default is "rm". If na.prop is set to "rm" the function 'is.na()' is not allowed in prop_exp.</p></dd>


<dt id="arg-total">total<a class="anchor" aria-label="anchor" href="#arg-total"></a></dt>
<dd><p>TRUE if you want to compute a total, FALSE if you don't. The default is TRUE.</p></dd>


<dt id="arg-prop-method">prop_method<a class="anchor" aria-label="anchor" href="#arg-prop-method"></a></dt>
<dd><p>Type of proportion method used to compute confidence intervals. See survey::svyciprop() for details. Default is beta method.</p></dd>


<dt id="arg-reorder">reorder<a class="anchor" aria-label="anchor" href="#arg-reorder"></a></dt>
<dd><p>TRUE if you want to reorder the groups according to the proportion. NA value, in case if na.rm.group = FALSE, is not included in the reorder. In case of facets, the groups are reordered based on each median group. Default is FALSE.</p></dd>


<dt id="arg-show-ci">show_ci<a class="anchor" aria-label="anchor" href="#arg-show-ci"></a></dt>
<dd><p>TRUE if you want to show the error bars on the graphic. FALSE if you don't want to show the error bars. Default is TRUE.</p></dd>


<dt id="arg-show-n">show_n<a class="anchor" aria-label="anchor" href="#arg-show-n"></a></dt>
<dd><p>TRUE if you want to show on the graphic the number of observations in the sample in each group. FALSE if you don't want to show this number. Default is FALSE.</p></dd>


<dt id="arg-show-value">show_value<a class="anchor" aria-label="anchor" href="#arg-show-value"></a></dt>
<dd><p>TRUE if you want to show the proportions in each group on the graphic. FALSE if you don't want to show the proportion. Default is TRUE.</p></dd>


<dt id="arg-show-labs">show_labs<a class="anchor" aria-label="anchor" href="#arg-show-labs"></a></dt>
<dd><p>TRUE if you want to show axes and legend (in case of a group.fill) labels. FALSE if you don't want to show any labels on axes and legend. Default is TRUE.</p></dd>


<dt id="arg-total-name">total_name<a class="anchor" aria-label="anchor" href="#arg-total-name"></a></dt>
<dd><p>Name of the total displayed on the graphic. Default is "Total" in French and in English and "Totaal" in Dutch.</p></dd>


<dt id="arg-scale">scale<a class="anchor" aria-label="anchor" href="#arg-scale"></a></dt>
<dd><p>Denominator of the proportions. Default is 100 to interpret numbers as percentages.</p></dd>


<dt id="arg-digits">digits<a class="anchor" aria-label="anchor" href="#arg-digits"></a></dt>
<dd><p>Number of decimal places displayed on the values labels on the graphic. Default is 0.</p></dd>


<dt id="arg-unit">unit<a class="anchor" aria-label="anchor" href="#arg-unit"></a></dt>
<dd><p>Unit displayed on the graphic. Default is percent.</p></dd>


<dt id="arg-dec">dec<a class="anchor" aria-label="anchor" href="#arg-dec"></a></dt>
<dd><p>Decimal mark displayed on the graphic. Default depends on lang: "," for fr and nl ; "." for en.</p></dd>


<dt id="arg-col">col<a class="anchor" aria-label="anchor" href="#arg-col"></a></dt>
<dd><p>Color of the bars if there is no group.fill. col must be a R color or an hexadecimal color code. Default is "deepskyblue3". The colors of total and NA group (in case of na.rm.group == FALSE) are always "grey40" and "grey". If there is a group.fill, col has no effect and pal argument should be used instead.</p></dd>


<dt id="arg-pal">pal<a class="anchor" aria-label="anchor" href="#arg-pal"></a></dt>
<dd><p>Colors of the bars if there is a group.fill. pal must be vector of R colors or hexadecimal colors or a palette from packages MetBrewer or PrettyCols or a palette from fonctionr. Default is "Coast" from PrettyCols. The color of NA group.fill (in case of na.rm.group == FALSE) and of the total are always "grey" and "grey40". If there is no group.fill, pal has no effect and col argument should be used instead.</p></dd>


<dt id="arg-direction">direction<a class="anchor" aria-label="anchor" href="#arg-direction"></a></dt>
<dd><p>Direction of the palette color. Default is 1. The opposite direction is -1. If there is no group.fill, this argument has no effect.</p></dd>


<dt id="arg-desaturate">desaturate<a class="anchor" aria-label="anchor" href="#arg-desaturate"></a></dt>
<dd><p>Numeric specifying the amount of desaturation where 1 corresponds to complete desaturation (no colors, grey layers only), 0 to no desaturation, and values in between to partial desaturation. Default is 0. It affects only the palette (pal, if there is a second group) and not the monocolor (col, if there is no second group). See colorspace::desaturate for details. If desaturate and lighten/darken arguments are used, lighten/darken is applied in a second time (i.e. on the color transformed by desaturate).</p></dd>


<dt id="arg-lighten">lighten<a class="anchor" aria-label="anchor" href="#arg-lighten"></a></dt>
<dd><p>Numeric specifying the amount of lightening. Negative numbers cause darkening. Value shoud be ranged between -1 (black) and 1 (white). Default is 0. It doesn't affect the color of NAs (in case of na.rm.group = FALSE). It affects only the palette (pal, if there is a second group) and not the monocolor (col, if there is no second group). See colorspace::lighten for details. If both argument ligthen and darken are used (not advised), darken is applied in a second time (i.e. on the color transformed by lighten).</p></dd>


<dt id="arg-darken">darken<a class="anchor" aria-label="anchor" href="#arg-darken"></a></dt>
<dd><p>Numeric specifying the amount of lightening. Negative numbers cause lightening. Value shoud be ranged between -1 (white) and 1 (black). Default is 0. It doesn't affect the color of NAs (in case of na.rm.group = FALSE). It affects only the palette (pal, if there is a second group) and not the monocolor (col, if there is no second group). See colorspace::darken for details. If both argument ligthen and darken are used (not advised), darken is applied in a second time (i.e. on the color transformed by lighten).</p></dd>


<dt id="arg-dodge">dodge<a class="anchor" aria-label="anchor" href="#arg-dodge"></a></dt>
<dd><p>Width of the bars. Default is 0.9 to let a small space between bars. A value of 1 leads to no space betweens bars. Values higher than 1 are not advised because they cause an overlaping of the bars. dodge doesn't affect the spaces between second groups (group.fill). There is always no space between second groups.</p></dd>


<dt id="arg-font">font<a class="anchor" aria-label="anchor" href="#arg-font"></a></dt>
<dd><p>Font used in the graphic. See load_and_active_fonts() for available fonts. Default is "Roboto".</p></dd>


<dt id="arg-wrap-width-y">wrap_width_y<a class="anchor" aria-label="anchor" href="#arg-wrap-width-y"></a></dt>
<dd><p>Number of characters before going to the line for the labels of the groups. Default is 25.</p></dd>


<dt id="arg-wrap-width-leg">wrap_width_leg<a class="anchor" aria-label="anchor" href="#arg-wrap-width-leg"></a></dt>
<dd><p>Number of characters before going to the line for the labels of the group.fill. Default is 25.</p></dd>


<dt id="arg-legend-ncol">legend_ncol<a class="anchor" aria-label="anchor" href="#arg-legend-ncol"></a></dt>
<dd><p>Number of colomns in the legend. Default is 4.</p></dd>


<dt id="arg-title">title<a class="anchor" aria-label="anchor" href="#arg-title"></a></dt>
<dd><p>Title of the graphic.</p></dd>


<dt id="arg-subtitle">subtitle<a class="anchor" aria-label="anchor" href="#arg-subtitle"></a></dt>
<dd><p>Subtitle of the graphic.</p></dd>


<dt id="arg-xlab">xlab<a class="anchor" aria-label="anchor" href="#arg-xlab"></a></dt>
<dd><p>X label on the graphic. As coord_flip() is used in the graphic, xlab refers to the x label on the graphic, after the coord_flip(), and not to the x variable in the data. Default (xlab = NULL) displays "Proportion :" (if lang == "fr"), "Proportion:" (if lang == "en" ) or "Aandeel:" (if lang == "nl"), followed by the prop_exp argument. To show no X label, use xlab = "".</p></dd>


<dt id="arg-ylab">ylab<a class="anchor" aria-label="anchor" href="#arg-ylab"></a></dt>
<dd><p>Y label on the graphic. As coord_flip() is used in the graphic, ylab refers to the y label on the graphic, after the coord_flip(), and not to the y variable in the data. Default (ylab = NULL) displays the name of the group variable. To show no Y label, use ylab = "".</p></dd>


<dt id="arg-legend-lab">legend_lab<a class="anchor" aria-label="anchor" href="#arg-legend-lab"></a></dt>
<dd><p>Legend (fill) label on the graphic. Default (legend_lab = NULL) displays the name of the group.fill variable. To show no legend label, use legend_lab = "".</p></dd>


<dt id="arg-caption">caption<a class="anchor" aria-label="anchor" href="#arg-caption"></a></dt>
<dd><p>Caption of the graphic. This caption goes under de default caption showing the result of the Chi-Square test. There is no way of not showing the result of the chi-square test as a caption.</p></dd>


<dt id="arg-lang">lang<a class="anchor" aria-label="anchor" href="#arg-lang"></a></dt>
<dd><p>Language of the indications on the graphic. Possibilities are  "fr" (french), "nl" (dutch) and "en" (english). Default is "fr".</p></dd>


<dt id="arg-theme">theme<a class="anchor" aria-label="anchor" href="#arg-theme"></a></dt>
<dd><p>Theme of the graphic. Default is "fonctionr". "IWEPS" adds y axis lines and ticks. NULL uses the default grey ggplot2 theme.</p></dd>


<dt id="arg-coef-font">coef_font<a class="anchor" aria-label="anchor" href="#arg-coef-font"></a></dt>
<dd><p>A multiplier factor for font size of all fonts on the graphic. Default is 1. Usefull when exporting the graphic for a publication (e.g. in a Quarto document).</p></dd>


<dt id="arg-export-path">export_path<a class="anchor" aria-label="anchor" href="#arg-export-path"></a></dt>
<dd><p>Path to export the results in an xlsx file. The file includes three (without group.fill) or two sheets (with a group.fill): the table, the graphic and the Chi-Square statistical test result.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list that contains a table, a ggplot graphic and, in most cases, a Chi-square statistical test.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Loading of data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">eusilc</span>, package <span class="op">=</span> <span class="st">"laeken"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Recoding eusilc$pl030 into eusilc$pl030_rec</span></span></span>
<span class="r-in"><span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030_rec</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span></span>
<span class="r-in"><span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030_rec</span><span class="op">[</span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030</span> <span class="op">==</span> <span class="st">"1"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Working full time"</span></span></span>
<span class="r-in"><span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030_rec</span><span class="op">[</span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030</span> <span class="op">==</span> <span class="st">"2"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Working part time"</span></span></span>
<span class="r-in"><span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030_rec</span><span class="op">[</span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030</span> <span class="op">==</span> <span class="st">"3"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Unemployed"</span></span></span>
<span class="r-in"><span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030_rec</span><span class="op">[</span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030</span> <span class="op">==</span> <span class="st">"4"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Student"</span></span></span>
<span class="r-in"><span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030_rec</span><span class="op">[</span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030</span> <span class="op">==</span> <span class="st">"5"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Retired"</span></span></span>
<span class="r-in"><span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030_rec</span><span class="op">[</span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030</span> <span class="op">==</span> <span class="st">"6"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Permanently disabled"</span></span></span>
<span class="r-in"><span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030_rec</span><span class="op">[</span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030</span> <span class="op">==</span> <span class="st">"7"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Fulfilling domestic tasks"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Computation, taking sample design into account</span></span></span>
<span class="r-in"><span><span class="va">eusilc_prop</span> <span class="op">&lt;-</span> <span class="fu">prop_group</span><span class="op">(</span></span></span>
<span class="r-in"><span><span class="va">eusilc</span>,</span></span>
<span class="r-in"><span>group <span class="op">=</span> <span class="va">pl030_rec</span>,</span></span>
<span class="r-in"><span>prop_exp <span class="op">=</span> <span class="va">py090n</span> <span class="op">&gt;</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>strata <span class="op">=</span> <span class="va">db040</span>,</span></span>
<span class="r-in"><span>ids <span class="op">=</span> <span class="va">db030</span>,</span></span>
<span class="r-in"><span>weight <span class="op">=</span> <span class="va">rb050</span>,</span></span>
<span class="r-in"><span>title <span class="op">=</span> <span class="st">"% of ind. receiving unemployment benefits in their hh"</span>,</span></span>
<span class="r-in"><span>subtitle <span class="op">=</span> <span class="st">"Example with austrian SILC data from 'laeken' package"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NAs introduced by coercion</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Parametres actifs dans fonctionr_options(): font, coef_font</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Input: data.frame</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Sampling design -&gt; ids:  db030, strata:  db040, weights:  rb050</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 2720 observations removed due to missing group</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 0.0729129314422607</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Variable(s) detected in prop_exp: py090n</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 0 observations removed due to missing value(s) for the variable(s) in prop_exp</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Results in graph form</span></span></span>
<span class="r-in"><span><span class="va">eusilc_prop</span><span class="op">$</span><span class="va">graph</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 7 rows containing missing values or values outside the scale range</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> (`geom_text()`).</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 1 row containing missing values or values outside the scale range</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> (`geom_text()`).</span>
<span class="r-plt img"><img src="prop_group-1.png" alt="" width="384" height="240"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Results in table format</span></span></span>
<span class="r-in"><span><span class="va">eusilc_prop</span><span class="op">$</span><span class="va">tab</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 8 × 11</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   pl030_rec                   prop prop_low prop_upp n_sample n_true_weighted</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Fulfilling domestic tasks 0.048<span style="text-decoration: underline;">5</span>   0.036<span style="text-decoration: underline;">9</span>   0.062<span style="text-decoration: underline;">4</span>     <span style="text-decoration: underline;">1</span>207          <span style="text-decoration: underline;">31</span>048.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> Permanently disabled      0.209    0.148    0.282       178          <span style="text-decoration: underline;">21</span>975.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> Retired                   0.017<span style="text-decoration: underline;">7</span>   0.013<span style="text-decoration: underline;">4</span>   0.022<span style="text-decoration: underline;">9</span>     <span style="text-decoration: underline;">3</span>146          <span style="text-decoration: underline;">31</span>988.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> Student                   0.019<span style="text-decoration: underline;">4</span>   0.010<span style="text-decoration: underline;">6</span>   0.032<span style="text-decoration: underline;">3</span>      736           <span style="text-decoration: underline;">7</span>666.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> Unemployed                0.732    0.690    0.770       518         <span style="text-decoration: underline;">221</span>878.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> Working full time         0.081<span style="text-decoration: underline;">8</span>   0.074<span style="text-decoration: underline;">1</span>   0.089<span style="text-decoration: underline;">9</span>     <span style="text-decoration: underline;">5</span>162         <span style="text-decoration: underline;">234</span>629.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span> Working part time         0.110    0.092<span style="text-decoration: underline;">1</span>   0.130      <span style="text-decoration: underline;">1</span>160          <span style="text-decoration: underline;">69</span>869.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">8</span> Total                     0.091<span style="text-decoration: underline;">6</span>   0.086<span style="text-decoration: underline;">3</span>   0.097<span style="text-decoration: underline;">1</span>    <span style="text-decoration: underline;">12</span>107         <span style="text-decoration: underline;">619</span>054.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 5 more variables: n_true_weighted_low &lt;dbl&gt;, n_true_weighted_upp &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   n_tot_weighted &lt;dbl&gt;, n_tot_weighted_low &lt;dbl&gt;, n_tot_weighted_upp &lt;dbl&gt;</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Joel Gires, Francois Ghesquiere.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

