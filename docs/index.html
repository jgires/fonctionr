<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Package pour faire des analyses faciles sur base de données d'enquête avec design complexe.">
<title>What the Package Does (Title Case) • fonctionr</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="What the Package Does (Title Case)">
<meta property="og:description" content="Package pour faire des analyses faciles sur base de données d'enquête avec design complexe.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">fonctionr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="fonctionr-">fonctionr <img src="reference/figures/fonctionr_logo.png" align="right" width="129"><a class="anchor" aria-label="anchor" href="#fonctionr-"></a>
</h1></div>
<!-- badges: start -->

<!-- badges: end -->
<p><code>fonctionr</code> est un package R qui a pour but de produire facilement des statistiques descriptives complètes à partir de données individuelles issues de sondages avec un design complexe. Le package inclut des fonctions permettant de produire les résultats les plus usuels (comparaison de proportions, de moyennes, de médianes, de distributions), en tenant compte du plan d’échantillonnage réel grâce au package <code>survey</code>.</p>
<p><code>fonctionr</code> a l’objectif de faciliter l’inférence statistique : outre des résultats descriptifs, le package produit des intervalles de confiance et des tests statistiques qui prennent en compte de design réel de l’enquête. <code>fonctionr</code> produit également des graphiques des résultats à l’aide de <code>ggplot2</code>, dans le but de pouvoir intégrer directement et rapidement les résultats produits dans un rapport/une publication.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Vous pouvez installer le package <code>fonctionr</code> depuis <a href="https://github.com/" class="external-link">GitHub</a>. Pour cela, il vous faut d’abord installer et charger le package <code>devtools</code> :</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Installer devtools si celui-ci n'est pas installé et charger le package</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Installer fonctionr</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"jgires/fonctionr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="utilisation">Utilisation<a class="anchor" aria-label="anchor" href="#utilisation"></a>
</h2>
<p>Avant toute utilisation, il faut bien entendu charger le package :</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">fonctionr</span><span class="op">)</span></span></code></pre></div>
<p>L’utilisation de <code>fonctionr</code> a pour but d’être simple. Pour nos exemples, nous utilisons les données de l’enquête SILC pour l’Autriche contenues dans le package <code>laeken</code>. Nous recodons d’abord la variable de statut économique pour la lisibilité des résultats :</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Loading of data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">eusilc</span>, package <span class="op">=</span> <span class="st">"laeken"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Creation of categories of economic status</span></span>
<span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030_rec</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030_rec</span><span class="op">[</span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030</span> <span class="op">==</span> <span class="st">"1"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Working full time"</span></span>
<span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030_rec</span><span class="op">[</span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030</span> <span class="op">==</span> <span class="st">"2"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Working part time"</span></span>
<span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030_rec</span><span class="op">[</span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030</span> <span class="op">==</span> <span class="st">"3"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Unemployed"</span></span>
<span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030_rec</span><span class="op">[</span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030</span> <span class="op">==</span> <span class="st">"4"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Student"</span></span>
<span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030_rec</span><span class="op">[</span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030</span> <span class="op">==</span> <span class="st">"5"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Retired"</span></span>
<span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030_rec</span><span class="op">[</span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030</span> <span class="op">==</span> <span class="st">"6"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Permanently disabled"</span></span>
<span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030_rec</span><span class="op">[</span><span class="va">eusilc</span><span class="op">$</span><span class="va">pl030</span> <span class="op">==</span> <span class="st">"7"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Fulfilling domestic tasks"</span></span></code></pre></div>
<p><code>fonctionr</code> permet de calculer facilement des moyennes de revenu par groupe grâce à la fonction <code><a href="reference/central_group.html">mean_group()</a></code>. Les groupes, ici de statut économique, sont indiqués dans l’argument <code>group</code>. C’est la moyenne du revenu mensuel qui est calculée, car on peut indiquer soit une variable quantitative, soit une expression pour calculer celle-ci, directement dans l’argument <code>quanti_exp</code> (dans ce cas la variable <code>eqIncome</code> est divisée par 12 à la volée). Le design de l’enquête SILC est pris en considération, puisque l’on peut indiquer les clusters (<code>ids</code>), les strates (<code>strata</code>) et les poids (<code>weight</code>) dans la fonction. Les intervalles de confiance et un test de différence des moyennes sont calculés en conséquence.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eusilc_mean</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/central_group.html">mean_group</a></span><span class="op">(</span></span>
<span>  <span class="va">eusilc</span>,</span>
<span>  group <span class="op">=</span> <span class="va">pl030_rec</span>,</span>
<span>  quanti_exp <span class="op">=</span> <span class="va">eqIncome</span> <span class="op">/</span> <span class="fl">12</span>,</span>
<span>  strata <span class="op">=</span> <span class="va">db040</span>,</span>
<span>  ids <span class="op">=</span> <span class="va">db030</span>,</span>
<span>  weight <span class="op">=</span> <span class="va">rb050</span>,</span>
<span>  reorder <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Mean of equivalised income in household by status of individuals"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Example with austrian SILC data from 'laeken' package"</span>,</span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Input: data.frame</span></span>
<span><span class="co">#&gt; Sampling design -&gt; ids:  db030, strata:  db040, weights:  rb050</span></span>
<span><span class="co">#&gt; Variable(s) détectée(s) dans quanti_exp : eqIncome</span></span>
<span><span class="co">#&gt; 0 lignes supprimées avec valeur(s) manquante(s) pour le(s) variable(s) de quanti_exp</span></span></code></pre></div>
<p>La fonction produit un tableau de résultats, le résultat d’un test statistique et un graphique ggplot qui regroupe l’ensemble, prêt à être inséré dans une publication :</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eusilc_mean</span><span class="op">$</span><span class="va">tab</span></span>
<span><span class="co">#&gt; # A tibble: 8 × 8</span></span>
<span><span class="co">#&gt;   pl030_rec            mean mean_low mean_upp n_sample n_weighted n_weighted_low</span></span>
<span><span class="co">#&gt;   &lt;fct&gt;               &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;int&gt;      &lt;dbl&gt;          &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Fulfilling domesti… 1296.    1253.    1338.     1207    640311.        605978.</span></span>
<span><span class="co">#&gt; 2 Permanently disabl… 1330.    1202.    1458.      178    104930.         85796.</span></span>
<span><span class="co">#&gt; 3 Retired             1720.    1681.    1758.     3146   1806954.       1746273.</span></span>
<span><span class="co">#&gt; 4 Student             1355.    1291.    1419.      736    395829.        365532.</span></span>
<span><span class="co">#&gt; 5 Unemployed          1456.    1380.    1532.      518    303252.        276953.</span></span>
<span><span class="co">#&gt; 6 Working full time   1895.    1864.    1926.     5162   2869868.       2797833.</span></span>
<span><span class="co">#&gt; 7 Working part time   1591.    1542.    1639.     1160    636121.        600709.</span></span>
<span><span class="co">#&gt; 8 Total               1703.    1679.    1726.    12107   6757264.       6683738.</span></span>
<span><span class="co">#&gt; # ℹ 1 more variable: n_weighted_upp &lt;dbl&gt;</span></span>
<span><span class="va">eusilc_mean</span><span class="op">$</span><span class="va">test.stat</span></span>
<span><span class="co">#&gt; Wald test for pl030_rec</span></span>
<span><span class="co">#&gt;  in svyglm(formula = fmla, design = data_W)</span></span>
<span><span class="co">#&gt; F =  141.5453  on  6  and  5985  df: p= &lt; 2.22e-16</span></span>
<span><span class="va">eusilc_mean</span><span class="op">$</span><span class="va">graph</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-6-1.png" width="100%"></p>
<p><code>fonctionr</code> comprend plusieurs fonctions pour réaliser des opérations similaires, par exemple pour calculer des proportions par groupe avec la fonction <code><a href="reference/prop_group.html">prop_group()</a></code>. On peut à nouveau indiquer directement une expression à partir de laquelle calculer les proportions dans l’argument <code>prop_exp</code> : dans ce cas la proportion à recevoir des revenus du chômage (= supérieurs à 0).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eusilc_prop</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/prop_group.html">prop_group</a></span><span class="op">(</span></span>
<span>  <span class="va">eusilc</span>,</span>
<span>  group <span class="op">=</span> <span class="va">pl030_rec</span>,</span>
<span>  prop_exp <span class="op">=</span> <span class="va">py090n</span> <span class="op">&gt;</span> <span class="fl">0</span>,</span>
<span>  strata <span class="op">=</span> <span class="va">db040</span>,</span>
<span>  ids <span class="op">=</span> <span class="va">db030</span>,</span>
<span>  weight <span class="op">=</span> <span class="va">rb050</span>,</span>
<span>  reorder <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Proportion of individuals receiving income from unemployment in their household"</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Example with austrian SILC data from 'laeken' package"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Input: data.frame</span></span>
<span><span class="co">#&gt; Sampling design -&gt; ids:  db030, strata:  db040, weights:  rb050</span></span>
<span><span class="co">#&gt; Variable(s) détectée(s) dans l'expression : py090n</span></span>
<span><span class="co">#&gt; 0 lignes supprimées avec valeur(s) manquante(s) pour le(s) variable(s) de l'expression</span></span>
<span><span class="va">eusilc_prop</span><span class="op">$</span><span class="va">tab</span></span>
<span><span class="co">#&gt; # A tibble: 8 × 11</span></span>
<span><span class="co">#&gt;   pl030_rec                   prop prop_low prop_upp n_sample n_true_weighted</span></span>
<span><span class="co">#&gt;   &lt;fct&gt;                      &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;int&gt;           &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Fulfilling domestic tasks 0.0485   0.0369   0.0624     1207          31048.</span></span>
<span><span class="co">#&gt; 2 Permanently disabled      0.209    0.148    0.282       178          21975.</span></span>
<span><span class="co">#&gt; 3 Retired                   0.0177   0.0134   0.0229     3146          31988.</span></span>
<span><span class="co">#&gt; 4 Student                   0.0194   0.0106   0.0323      736           7666.</span></span>
<span><span class="co">#&gt; 5 Unemployed                0.732    0.690    0.770       518         221878.</span></span>
<span><span class="co">#&gt; 6 Working full time         0.0818   0.0741   0.0899     5162         234629.</span></span>
<span><span class="co">#&gt; 7 Working part time         0.110    0.0921   0.130      1160          69869.</span></span>
<span><span class="co">#&gt; 8 Total                     0.0916   0.0863   0.0971    12107         619054.</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: n_true_weighted_low &lt;dbl&gt;, n_true_weighted_upp &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   n_tot_weighted &lt;dbl&gt;, n_tot_weighted_low &lt;dbl&gt;, n_tot_weighted_upp &lt;dbl&gt;</span></span>
<span><span class="va">eusilc_prop</span><span class="op">$</span><span class="va">test.stat</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Pearson's X^2: Rao &amp; Scott adjustment</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; data:  NextMethod()</span></span>
<span><span class="co">#&gt; F = 475.2, ndf = 5.9608, ddf = 35711.0201, p-value &lt; 2.2e-16</span></span>
<span><span class="va">eusilc_prop</span><span class="op">$</span><span class="va">graph</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-7-1.png" width="100%"></p>
</div>
<div class="section level2">
<h2 id="auteurs">Auteurs<a class="anchor" aria-label="anchor" href="#auteurs"></a>
</h2>
<p><strong>Joël Girès</strong> est sociologue et travaille à l’Observatoire de la Santé et du Social de la Région de Bruxelles-Capitale.</p>
<p><strong>François Ghesquière</strong> est sociologue et travaille à l’Institut wallon de l’évaluation, de la prospective et de la statistique.</p>
<p>Nous sommes ouverts à toute remarque afin d’améliorer notre package.</p>
<p><a href="https://www.ccc-ggc.brussels/fr/observatbru/accueil" class="external-link"><img src="reference/figures/logo_observatoire_sante_social.png" align="center" height="120/"></a><a href="https://www.iweps.be" class="external-link"><img src="reference/figures/logo_iweps.png" align="center" height="120/"></a></p>
</div>
<div class="section level2" style="border:1px; background-color:#f8f5e4; padding: 5px 10px 10px 10px; margin-bottom: 10px">
<h2 id="to-do-list">To do list<a class="anchor" aria-label="anchor" href="#to-do-list"></a>
</h2>
<div class="section level3">
<h3 id="prioritaire-nécessités-ou-bugs">Prioritaire (nécessités ou bugs)<a class="anchor" aria-label="anchor" href="#prioritaire-n%C3%A9cessit%C3%A9s-ou-bugs"></a>
</h3>
<div class="section level4">
<h4 id="filtrage">Filtrage<a class="anchor" aria-label="anchor" href="#filtrage"></a>
</h4>
<p>Il semble qu’il faille filtrer <u>après</u> la déclaration du design. Si on ne le fait pas, on considère le design sur l’objet filtré (avec moins de PSU / strates qu’il y en a en réalité), ce qui sous-estime potentiellement la distribution d’échantillonnage. Voir :</p>
<ul>
<li><p><a href="https://stats.stackexchange.com/questions/411026/why-it-is-important-to-make-survey-design-object-svydesign-function-in-r-with-i" class="external-link uri">https://stats.stackexchange.com/questions/411026/why-it-is-important-to-make-survey-design-object-svydesign-function-in-r-with-i</a></p></li>
<li>
<p><a href="https://notstatschat.rbind.io/2021/07/22/subsets-and-subpopulations-in-survey-inference/" class="external-link uri">https://notstatschat.rbind.io/2021/07/22/subsets-and-subpopulations-in-survey-inference/</a></p>
<p><em>=&gt; De ce fait, j’ai inclus une option de filtre (<code>filter_exp</code>) dans les fonctions (qui filtre après la déclaration du design), qui évite de filtrer l’objet avant en dégradant le design. =&gt; Vérifier que c’est bien OK ! <strong>A FAIRE : expliquer dans la doc !</strong></em></p>
</li>
</ul>
</div>
<div class="section level4">
<h4 id="en-général">En général<a class="anchor" aria-label="anchor" href="#en-g%C3%A9n%C3%A9ral"></a>
</h4>
<ul>
<li><p>Ordonner les arguments de la même manière pour chaque fonction =&gt; après cela, faire pareil pour l’ordre des arguments dans les fonctions de check !</p></li>
<li>
<p>Ajouter des checks pour les inputs :</p>
<ol style="list-style-type: decimal">
<li><p>Existence des colonnes dans le dataframe <em>=&gt; C’est fait sauf pour les variables de design + pondération ? Est-ce testable, du fait que j’ai mis l’argument <code>…</code> ? Investiguer…</em> ;</p></li>
<li><p>Le bon type (logical, factor…) et la bonne taille (pas un vecteur &gt; 1).<br><em>=&gt; C’est fait. Améliorer les messages ? (par ex. : indiquer l’argument)</em></p></li>
<li><p>Suffisamment de modalités (pas de facteur à 1 modalité, par ex.) ;</p></li>
<li><p>Pas mettre les mêmes colonnes dans les différents arguments (<code>group</code>, <code>var_distrib</code>, <code>facet_var</code>, etc.) ;</p></li>
</ol>
</li>
<li><p>Mettre des conditions pour réaliser les tests (n min, distribution, variances égales…).</p></li>
<li><p>Les cluster / strates / weights n’apparaissent pas dans le message de la console avec les replicates =&gt; pourquoi ?</p></li>
<li><p>Ajouter <code>n_weight_upp</code> et <code>n_weight_low</code> + harmoniser les noms des colonnes entre fonctions (<code>n</code> vs <code>n_tot</code>, <code>n_weighted</code> vs <code>n_tot_weighted</code>…).<br><em>=&gt; François : je propose l’ordre suivant : les variables de ventilation, l’indicateur, l’indicateur_low, l’indicateur_up, n_sample, n_true_weighted, n_true_weighted_low, n_true_weighted_upp, n_tot_weighted, n_tot_weighted_low, n_tot_weighted_upp.</em><!--# Joël : OK donc c'est fait ? --></p></li>
<li><p>Ajouter la possibilité de changer le point en virgule pour la décimale dans les étiquettes.</p></li>
</ul>
</div>
<div class="section level4">
<h4 id="central_group">central_group<a class="anchor" aria-label="anchor" href="#central_group"></a>
</h4>
<ul>
<li>Bypasser l’erreur du test stat avec <code><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch()</a></code>.</li>
</ul>
</div>
<div class="section level4">
<h4 id="prop_group">prop_group<a class="anchor" aria-label="anchor" href="#prop_group"></a>
</h4>
<ul>
<li>Bypasser l’erreur du test stat avec <code><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch()</a></code>.</li>
<li>ajouter la possibilité d’un <code>na.rm.prop = FALSE</code> pour que la proportion soit calculée sur l’ensemble des individus (les <code>NA</code> étant comptabilisés dans le dénominateur)</li>
</ul>
</div>
<div class="section level4">
<h4 id="distrib_group_d">distrib_group_d<a class="anchor" aria-label="anchor" href="#distrib_group_d"></a>
</h4>
<ul>
<li>Implémenter un test stat lorsqu’il y a des facets =&gt; via modélisation loglinéaire, mais j’ai un peu de mal à comprendre les erreurs de <code>survey</code> (erreurs fréquentes).</li>
<li>Ajouter les n par “cellule” ?</li>
</ul>
</div>
<div class="section level4">
<h4 id="distrib_d">distrib_d<a class="anchor" aria-label="anchor" href="#distrib_d"></a>
</h4>
<ul>
<li>Ajouter un test khi2 d’adéquation =&gt; <strong>Pour rappel, l’import de <code>survey</code> dans les dépendances ne sert à rien tant que le test n’est pas implémenté !</strong>
</li>
</ul>
</div>
<div class="section level4">
<h4 id="many_prop">many_prop<a class="anchor" aria-label="anchor" href="#many_prop"></a>
</h4>
<ul>
<li><p>Documenter les arguments !</p></li>
<li><p>Ajouter l’export excel.</p></li>
</ul>
</div>
<div class="section level4">
<h4 id="many_prop_group">many_prop_group<a class="anchor" aria-label="anchor" href="#many_prop_group"></a>
</h4>
<ul>
<li>Ajouter l’export excel.</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="améliorations">Améliorations<a class="anchor" aria-label="anchor" href="#am%C3%A9liorations"></a>
</h3>
<div class="section level4">
<h4 id="en-général-1">En général<a class="anchor" aria-label="anchor" href="#en-g%C3%A9n%C3%A9ral-1"></a>
</h4>
<ul>
<li>Voir si on peut créer une fonction commune à toutes les fonctions du package pour créer le ggplot =&gt; ce serait une large simplification. Pour l’instant, il y a déjà un thème commun <code>theme_fonctionr</code>.</li>
<li>Créer une fonction de check des inputs indispensables (car redondance entre les 4 fonctions)<br><em>=&gt; Pour l’instant c’est fait “en dur” : difficultés de créer une fonction du fait de l’usage du tidyverse : il faut sans doute utiliser les fonctions de <code>rlang</code>.</em>
</li>
</ul>
</div>
<div class="section level4">
<h4 id="central_group-1">central_group<a class="anchor" aria-label="anchor" href="#central_group-1"></a>
</h4>
<ul>
<li>Pouvoir réordonner avec les facet =&gt; solution avec <code>tidytext</code> <a href="https://juliasilge.com/blog/reorder-within/" class="external-link uri">https://juliasilge.com/blog/reorder-within/</a>
</li>
</ul>
</div>
<div class="section level4">
<h4 id="prop_group-1">prop_group<a class="anchor" aria-label="anchor" href="#prop_group-1"></a>
</h4>
<ul>
<li>Pouvoir réordonner avec les facet =&gt; solution avec <code>tidytext</code> <a href="https://juliasilge.com/blog/reorder-within/" class="external-link uri">https://juliasilge.com/blog/reorder-within/</a>
</li>
</ul>
</div>
<div class="section level4">
<h4 id="distrib_group_d-1">distrib_group_d<a class="anchor" aria-label="anchor" href="#distrib_group_d-1"></a>
</h4>
<ul>
<li><p>Ajouter un total ? Il faudrait une autre couleur, sinon pas clair =&gt; comment faire vu qu’il y a la palette de couleur des modalités ?<br><em>=&gt; Tentative en cours d’utiliser des hachures.</em></p></li>
<li><p>Réordonner les levels sur la variable <code>group</code> ? Mais selon quelle valeur (vu qu’il y en a plusieurs) ? Celle du premier level de la variable <code>var_distrib</code> ?</p></li>
<li><p>Ajouter les effectifs totaux par groupe ? (dans le nom du groupe ?)</p></li>
<li><p>Possibilité d’indiquer un vecteur avec une palette de couleur pour coller avec le code couleur de notre institution ?</p></li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="fonctions-à-créer">Fonctions à créer<a class="anchor" aria-label="anchor" href="#fonctions-%C3%A0-cr%C3%A9er"></a>
</h3>
<div class="section level4">
<h4 id="univarié">Univarié<a class="anchor" aria-label="anchor" href="#univari%C3%A9"></a>
</h4>
<ul>
<li>Densité pour le général (pour variable continue)</li>
</ul>
</div>
<div class="section level4">
<h4 id="bivarié-ou-3-variables">Bivarié ou 3 variables+<a class="anchor" aria-label="anchor" href="#bivari%C3%A9-ou-3-variables"></a>
</h4>
<ul>
<li><p>prop/moyenne/médiane par 2 groupes</p></li>
<li><p>Tableau croisé avec résidus ou couleur par proportion (proportions par c, l, ou total)</p></li>
<li><p>Densité par groupe (pour variable continue)</p></li>
</ul>
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing fonctionr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Joel Gires <br><small class="roles"> Author, maintainer </small>  </li>
<li>Francois Ghesquiere <br><small class="roles"> Author </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.gnu.org/licenses/gpl-3.0" class="external-link"><img src="https://img.shields.io/badge/License-GPLv3-blue.svg" alt="License: GPL v3"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Joel Gires, Francois Ghesquiere.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
