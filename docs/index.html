<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Package pour faire des analyses faciles sur base de données d'enquête avec design complexe.">
<title>What the Package Does (Title Case) • fonctionr</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="What the Package Does (Title Case)">
<meta property="og:description" content="Package pour faire des analyses faciles sur base de données d'enquête avec design complexe.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">fonctionr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="fonctionr-">fonctionr <img src="reference/figures/fonctionr_logo.png" align="right" width="129"><a class="anchor" aria-label="anchor" href="#fonctionr-"></a>
</h1></div>
<!-- badges: start -->

<!-- badges: end -->
<p><code>fonctionr</code> est un package R qui a pour but de produire facilement des statistiques descriptives complètes à partir de données individuelles issues de sondages avec un design complexe. Le package inclut des fonctions permettant de produire les résultats les plus usuels (comparaison de proportions, de moyennes, de médianes, de distributions), en tenant compte du plan d’échantillonnage réel grâce au package <code>survey</code>.</p>
<p><code>fonctionr</code> a l’objectif de faciliter l’inférence statistique : outre des résultats descriptifs, le package produit des intervalles de confiance et des tests statistiques qui prennent en compte de design réel de l’enquête. <code>fonctionr</code> produit également des graphiques des résultats à l’aide de <code>ggplot2</code>, dans le but de pouvoir intégrer directement et rapidement les résultats produits dans un rapport/une publication.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Vous pouvez installer le package <code>fonctionr</code> depuis <a href="https://github.com/" class="external-link">GitHub</a>. Pour cela, il vous faut d’abord installer et charger le package <code>devtools</code> :</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Installer devtools si celui-ci n'est pas installé et charger le package</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Installer fonctionr</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"jgires/fonctionr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="auteurs">Auteurs<a class="anchor" aria-label="anchor" href="#auteurs"></a>
</h2>
<p><strong>Joël Girès</strong> est sociologue et travaille à l’Observatoire de la Santé et du Social de la Région de Bruxelles-Capitale.</p>
<p><strong>François Ghesquière</strong> est sociologue et travaille à l’Institut wallon de l’évaluation, de la prospective et de la statistique.</p>
<p>Nous sommes ouverts à toute remarque afin d’améliorer notre package.</p>
<p><a href="https://www.ccc-ggc.brussels/fr/observatbru/accueil" class="external-link"><img src="reference/figures/logo_observatoire_sante_social.png" align="center" height="120/"></a><a href="https://www.iweps.be" class="external-link"><img src="reference/figures/logo_iweps.png" align="center" height="120/"></a></p>
</div>
<div class="section level2" style="border:1px; background-color:#f8f5e4; padding: 5px 10px 10px 10px; margin-bottom: 10px">
<h2 id="to-do-list">To do list<a class="anchor" aria-label="anchor" href="#to-do-list"></a>
</h2>
<div class="section level3">
<h3 id="prioritaire-nécessités-ou-bugs">Prioritaire (nécessités ou bugs)<a class="anchor" aria-label="anchor" href="#prioritaire-n%C3%A9cessit%C3%A9s-ou-bugs"></a>
</h3>
<div class="section level4">
<h4 id="filtrage">Filtrage<a class="anchor" aria-label="anchor" href="#filtrage"></a>
</h4>
<p>Il semble qu’il faille filtrer <u>après</u> la déclaration du design. Si on ne le fait pas, on considère le design sur l’objet filtré (avec moins de PSU / strates qu’il y en a en réalité), ce qui sous-estime potentiellement la distribution d’échantillonnage. Voir :</p>
<ul>
<li><p><a href="https://stats.stackexchange.com/questions/411026/why-it-is-important-to-make-survey-design-object-svydesign-function-in-r-with-i" class="external-link uri">https://stats.stackexchange.com/questions/411026/why-it-is-important-to-make-survey-design-object-svydesign-function-in-r-with-i</a></p></li>
<li>
<p><a href="https://notstatschat.rbind.io/2021/07/22/subsets-and-subpopulations-in-survey-inference/" class="external-link uri">https://notstatschat.rbind.io/2021/07/22/subsets-and-subpopulations-in-survey-inference/</a></p>
<p><em>=&gt; De ce fait, j’ai inclus une option de filtre (<code>filter_exp</code>) dans les fonctions (qui filtre après la déclaration du design), qui évite de filtrer l’objet avant en dégradant le design. =&gt; Vérifier que c’est bien OK ! <strong>A FAIRE : expliquer dans la doc !</strong></em></p>
</li>
</ul>
</div>
<div class="section level4">
<h4 id="suppression-des-valeurs-manquantes">Suppression des valeurs manquantes<a class="anchor" aria-label="anchor" href="#suppression-des-valeurs-manquantes"></a>
</h4>
<p>Dans <code>prop_group</code>, garder la possibilité de calculer une proportion sur tout le groupe (y compris les <code>NA</code>) =&gt; utile lorsque le <code>NA</code> a une signification (exemple : les personnes qui ne peuvent pas avoir d’arriérés sur leur loyer ou leur emprunt, car ils n’ont pas de loyer ou d’emprunt).</p>
</div>
<div class="section level4">
<h4 id="en-général">En général<a class="anchor" aria-label="anchor" href="#en-g%C3%A9n%C3%A9ral"></a>
</h4>
<ul>
<li>
<p>Ajouter des checks pour les inputs :</p>
<ol style="list-style-type: decimal">
<li><p>Existence des colonnes dans le dataframe <em>=&gt; C’est fait sauf pour les variables de design + pondération ? Est-ce testable, du fait que j’ai mis l’argument <code>…</code> ? Investiguer…</em> ;</p></li>
<li><p>Pas mettre les mêmes colonnes dans les différents arguments (<code>group</code>, <code>var_distrib</code>, <code>facet_var</code>, etc.) ;</p></li>
<li><p>Suffisamment de modalités (pas de facteur à 1 modalité, par ex.) ;</p></li>
<li><p>Le bon type (logical, factor…) et la bonne taille (pas un vecteur &gt; 1).</p></li>
</ol>
</li>
<li><p>Mettre des conditions sur les tests (n min, distribution, variances égales…).</p></li>
<li><p>Les cluster / strates / weights n’apparaissent pas dans le message de la console avec les replicates =&gt; pourquoi ?</p></li>
<li><p>Ajouter <code>n_weight_upp</code> et <code>n_weight_low</code> + harmoniser les noms des colonnes entre fonctions (<code>n</code> vs <code>n_tot</code>, <code>n_weighted</code> vs <code>n_tot_weighted</code>…)</p></li>
</ul>
</div>
<div class="section level4">
<h4 id="central_group">central_group<a class="anchor" aria-label="anchor" href="#central_group"></a>
</h4>
<ul>
<li>Bypasser l’erreur du test stat avec <code><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch()</a></code>.</li>
</ul>
</div>
<div class="section level4">
<h4 id="prop_group">prop_group<a class="anchor" aria-label="anchor" href="#prop_group"></a>
</h4>
<ul>
<li>Bypasser l’erreur du test stat avec <code><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch()</a></code>.</li>
</ul>
</div>
<div class="section level4">
<h4 id="distrib_group_d">distrib_group_d<a class="anchor" aria-label="anchor" href="#distrib_group_d"></a>
</h4>
<ul>
<li>Implémenter un test stat lorsqu’il y a des facets =&gt; via modélisation loglinéaire, mais j’ai un peu de mal à comprendre les erreurs de <code>survey</code> (erreurs fréquentes).</li>
</ul>
</div>
<div class="section level4">
<h4 id="distrib_d">distrib_d<a class="anchor" aria-label="anchor" href="#distrib_d"></a>
</h4>
<ul>
<li>Ajouter un test khi2 d’adéquation =&gt; <strong>Pour rappel, l’import de <code>survey</code> dans les dépendances ne sert à rien tant que le test n’est pas implémenté !</strong>
</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="améliorations">Améliorations<a class="anchor" aria-label="anchor" href="#am%C3%A9liorations"></a>
</h3>
<div class="section level4">
<h4 id="en-général-1">En général<a class="anchor" aria-label="anchor" href="#en-g%C3%A9n%C3%A9ral-1"></a>
</h4>
<ul>
<li><p>Enlever le paramètre <code>dodge</code> ? =&gt; ne sert à rien.</p></li>
<li><p>Créer une fonction de check des inputs (car redondance entre les 4 fonctions) <em>=&gt; Difficultés du fait de l’usage du tidyverse</em></p></li>
</ul>
</div>
<div class="section level4">
<h4 id="central_group-1">central_group<a class="anchor" aria-label="anchor" href="#central_group-1"></a>
</h4>
<ul>
<li>Pouvoir réordonner avec les facet =&gt; solution avec <code>tidytext</code> <a href="https://juliasilge.com/blog/reorder-within/" class="external-link uri">https://juliasilge.com/blog/reorder-within/</a>
</li>
</ul>
</div>
<div class="section level4">
<h4 id="prop_group-1">prop_group<a class="anchor" aria-label="anchor" href="#prop_group-1"></a>
</h4>
<ul>
<li>Pouvoir réordonner avec les facet =&gt; solution avec <code>tidytext</code> <a href="https://juliasilge.com/blog/reorder-within/" class="external-link uri">https://juliasilge.com/blog/reorder-within/</a>
</li>
</ul>
</div>
<div class="section level4">
<h4 id="distrib_group_d-1">distrib_group_d<a class="anchor" aria-label="anchor" href="#distrib_group_d-1"></a>
</h4>
<ul>
<li><p>Ajouter un total ? Il faudrait une autre couleur, sinon pas clair =&gt; comment faire vu qu’il y a la palette de couleur des modalités ? Tentative en cours d’utiliser des hachures.</p></li>
<li><p>Réordonner les levels sur la variable <code>group</code> ? Mais selon quelle valeur (vu qu’il y en a plusieurs) ? Celle du premier level de la variable <code>var_distrib</code> ?</p></li>
<li><p>Ajouter les effectifs totaux par groupe ? (dans le nom du groupe ?)</p></li>
<li><p>Possibilité d’indiquer un vecteur avec une palette de couleur pour coller avec le code couleur de notre institution ?</p></li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="fonctions-à-créer">Fonctions à créer<a class="anchor" aria-label="anchor" href="#fonctions-%C3%A0-cr%C3%A9er"></a>
</h3>
<div class="section level4">
<h4 id="univarié">Univarié<a class="anchor" aria-label="anchor" href="#univari%C3%A9"></a>
</h4>
<ul>
<li><p>Densité pour le général (pour variable continue)</p></li>
<li><p>Différents indicateurs + IC par groupe (<u><em>PAS OK AVEC PIVOT_LONG_SURVEY ?</em></u>)</p></li>
</ul>
</div>
<div class="section level4">
<h4 id="bivarié-ou-3-variables">Bivarié ou 3 variables+<a class="anchor" aria-label="anchor" href="#bivari%C3%A9-ou-3-variables"></a>
</h4>
<ul>
<li><p>prop/moyenne/médiane par 2 groupes</p></li>
<li><p>Tableau croisé avec résidus ou couleur par proportion (proportions par c, l, ou total)</p></li>
<li><p>Densité par groupe (pour variable continue)</p></li>
</ul>
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing fonctionr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Joel Gires <br><small class="roles"> Author, maintainer </small>  </li>
<li>Francois Ghesquiere <br><small class="roles"> Author </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.gnu.org/licenses/gpl-3.0" class="external-link"><img src="https://img.shields.io/badge/License-GPLv3-blue.svg" alt="License: GPL v3"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Joel Gires, Francois Ghesquiere.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
