<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Changelog • fonctionr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fonctionr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.11</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/fonctionr_functions.html">Manuel</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/esthetic_functions.html">Fonctions esthétiques</a></li>
    <li><a class="dropdown-item" href="../articles/complex_design.html">Sondages avec design complexe</a></li>
    <li><a class="dropdown-item" href="../articles/Obss_colors.html">Couleurs pour l'Observatoire de la Santé et du Social</a></li>
  </ul>
</li>
<li class="active nav-item"><a class="nav-link" href="../articles/changelog.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/jgires/fonctionr"><span class="fa fa-github fa-lg"></span> github</a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Changelog</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jgires/fonctionr/blob/HEAD/vignettes/changelog.Rmd" class="external-link"><code>vignettes/changelog.Rmd</code></a></small>
      <div class="d-none name"><code>changelog.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="fonctionr-0-3-11">fonctionr 0.3.11<a class="anchor" aria-label="anchor" href="#fonctionr-0-3-11"></a>
</h2>
<p>Date : 2025-02-11</p>
<ul>
<li>Modification des fonctions qui calculent des totaux, pour afficher
<strong>en gras</strong> le label ainsi que les indicateurs du total.
Pour ce faire, le package <code>ggtext</code> est désormais utilisé ; il
y a donc une dépendance en plus.</li>
<li>La fonction <code><a href="../reference/distrib_group_discrete.html">distrib_group_discrete()</a></code> affiche désormais
l’unité <code>%</code> sur l’axe des x par défaut, c’est-à-dire lorsque
l’unité est définie comme un espace vide (<code>""</code>) et que
l’argument <code>scale</code> vaut <code>100</code>.</li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-3-10">fonctionr 0.3.10<a class="anchor" aria-label="anchor" href="#fonctionr-0-3-10"></a>
</h2>
<p>Date : 2024-12-17</p>
<ul>
<li><p>Ajout de palettes spécifiques pour l’Observatoire de la Santé et
du Social.</p></li>
<li><p>Export de la fonction <code><a href="../reference/official_pal.html">official_pal()</a></code>.</p></li>
<li><p>Ajout de la possibilité de désaturer, éclaircir ou foncer les
palettes de couleur.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-3-9">fonctionr 0.3.9<a class="anchor" aria-label="anchor" href="#fonctionr-0-3-9"></a>
</h2>
<p>Date : 2024-09-15</p>
<ul>
<li><p>Ajout de l’argument <code>lang</code> qui permet l’affichage des
indications sur les graphiques en trois langues : français, néérlandais,
anglais.</p></li>
<li><p>Ajout d’exemples dans la documentation des fonctions.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-3-8">fonctionr 0.3.8<a class="anchor" aria-label="anchor" href="#fonctionr-0-3-8"></a>
</h2>
<p>Date : 2024-09-04</p>
<ul>
<li><p>Ajout du calcul de totaux pour <code><a href="../reference/central_group.html">central_group()</a></code> et
<code><a href="../reference/prop_group.html">prop_group()</a></code> avec les <code>group.fill</code>
activés.</p></li>
<li><p>Ajout du calcul de totaux pour <code><a href="../reference/distrib_group_discrete.html">distrib_group_d()</a></code> et
<code><a href="../reference/many_val_group.html">many_val_group()</a></code>.</p></li>
<li><p>Ajout d’un <code>theme</code> “IWEPS” pour les
graphiques.</p></li>
<li><p>L’argument <code>show_lab</code> devient <code>show_labs</code>
(avec un s) pour toutes les fonctions.</p></li>
<li><p>L’argument de couleur <code>fill</code> devient <code>pal</code>
pour toutes les fonctions (par cohérence).</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-3-7">fonctionr 0.3.7<a class="anchor" aria-label="anchor" href="#fonctionr-0-3-7"></a>
</h2>
<p>Date : 2024-08-04</p>
<ul>
<li><p>Modifications substancielles pour <code><a href="../reference/central_group.html">central_group()</a></code> :
ajout de la possibilité de faire des sous-groupes (argument
<code>group.fill</code>) par groupe.</p></li>
<li><p>Ajout de la possibilité dans <code><a href="../reference/central_group.html">central_group()</a></code> de ne
pas calculer le total.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-3-6">fonctionr 0.3.6<a class="anchor" aria-label="anchor" href="#fonctionr-0-3-6"></a>
</h2>
<p>Date : 2024-07-20</p>
<ul>
<li><p>Ajout de la possibilité dans <code><a href="../reference/prop_group.html">prop_group()</a></code> de ne pas
calculer le total.</p></li>
<li><p>Dans <code><a href="../reference/make_surface.html">make_surface()</a></code>, l’option
<code>position = "bottom"</code> change également la position de la
surface minimale affichée lorsque <code>compare = T</code> (suggestion
de Robin).</p></li>
<li><p>Optimisation du code (très légère augmentation de la
vitesse).</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-3-5">fonctionr 0.3.5<a class="anchor" aria-label="anchor" href="#fonctionr-0-3-5"></a>
</h2>
<p>Date : 2024-07-07</p>
<ul>
<li><p>Modifications substancielles pour <code><a href="../reference/prop_group.html">prop_group()</a></code> :
ajout de la possibilité de faire des sous-groupes (argument
<code>group.fill</code>) par groupe.</p></li>
<li><p>La fonction <code><a href="../reference/make_surface.html">make_surface()</a></code> est terminée :
documentation et checks.</p></li>
<li><p>Modification du code relatif aux palettes de couleurs pour
compatibilité avec la nouvelle version de <code>PrettyCols</code>
(changement de nom d’un argument).</p></li>
<li><p>Corrections mineures à divers endroits du code. Le check
n’indique désormais plus d’erreur, warning ou note.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-3-4">fonctionr 0.3.4<a class="anchor" aria-label="anchor" href="#fonctionr-0-3-4"></a>
</h2>
<p>Date : 2024-06-29</p>
<ul>
<li><p>Ajout de l’export excel pour <code><a href="../reference/distrib_continuous.html">distrib_continuous()</a></code> et
<code><a href="../reference/distrib_group_continuous.html">distrib_group_continuous()</a></code>. De légères modifications des
outputs de ces deux fonctions ont été apportées pour rendre l’export
propre.</p></li>
<li><p>Ajout de trois polices d’écriture dans <code>fonctionr</code> :
<code>Helvetica Neue</code>, <code>League Gothic</code> et
<code>Amatic</code>.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-3-3">fonctionr 0.3.3<a class="anchor" aria-label="anchor" href="#fonctionr-0-3-3"></a>
</h2>
<p>Date : 2024-06-06</p>
<ul>
<li>Amélioration de l’affichage des aires de densité dans
<code><a href="../reference/distrib_group_continuous.html">distrib_group_continuous()</a></code> lorsque la palette est d’une
seule couleur (on ne voit plus les limites des quantiles).</li>
<li>Ajout des facets dans <code><a href="../reference/make_surface.html">make_surface()</a></code>.</li>
<li>Mise à la ligne automatique de caption tous les 100 caractères dans
toutes les fonctions.</li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-3-2">fonctionr 0.3.2<a class="anchor" aria-label="anchor" href="#fonctionr-0-3-2"></a>
</h2>
<p>Date : 2024-05-27</p>
<ul>
<li>Correction d’un bug sur le reorder des valeurs dans
<code><a href="../reference/distrib_group_continuous.html">distrib_group_continuous()</a></code>.</li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-3-1">fonctionr 0.3.1<a class="anchor" aria-label="anchor" href="#fonctionr-0-3-1"></a>
</h2>
<p>Date : 2024-05-25</p>
<ul>
<li>Correction d’un bug dans la plupart des fonctions sur le reorder des
valeurs par la médiane des résultats utilisé pour les facets (la
fonction est désormais écrite avec des guillemets :
<code>FUN = "median"</code>. Sans cela, il y avait dans certains cas
particuliers une erreur).</li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-3-0">fonctionr 0.3.0<a class="anchor" aria-label="anchor" href="#fonctionr-0-3-0"></a>
</h2>
<p>Date : 2024-04-26</p>
<ul>
<li><p>La documentation a été complétée pour que le package puisse être
utilisé par des personnes tierces. Le package commence à être
diffusable.</p></li>
<li><p>Le bug avec la ligne du geom_line qui est coupée pour
<code><a href="../reference/distrib_group_continuous.html">distrib_group_continuous()</a></code> est réglé.</p></li>
<li><p>bug d’ordonnancement des facteurs réglé dans
<code><a href="../reference/esth_graph.html">esth_graph()</a></code>.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-2-13">fonctionr 0.2.13<a class="anchor" aria-label="anchor" href="#fonctionr-0-2-13"></a>
</h2>
<p>Date : 2024-04-20</p>
<ul>
<li><p>Création de <code><a href="../reference/make_surface.html">make_surface()</a></code> comme fonction
indépendante utilisable sur n’importe quel tableau de
résultats.</p></li>
<li><p>Ajout de la possibilité d’afficher le résultat d’un test
statistique dans <code><a href="../reference/esth_graph.html">esth_graph()</a></code>.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-2-12">fonctionr 0.2.12<a class="anchor" aria-label="anchor" href="#fonctionr-0-2-12"></a>
</h2>
<p>Date : 2024-04-04</p>
<ul>
<li><p>Création de <code><a href="../reference/distrib_continuous.html">distrib_continuous()</a></code> et
<code><a href="../reference/distrib_group_continuous.html">distrib_group_continuous()</a></code>.</p></li>
<li><p>Modification du thème <code><a href="../reference/theme_fonctionr.html">theme_fonctionr()</a></code> pour qu’il
soit plus adapté aux nouvelles fonctions.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-2-11">fonctionr 0.2.11<a class="anchor" aria-label="anchor" href="#fonctionr-0-2-11"></a>
</h2>
<p>Date : 2024-03-17</p>
<ul>
<li>Réécriture du code de toutes les fonctions (sauf
<code><a href="../reference/esth_graph.html">esth_graph()</a></code> et <code><a href="../reference/pivot_longer_survey.html">pivot_longer_survey()</a></code>) :
simplification + structuration.</li>
<li>Nouvelle logique des na.rm finalisée pour toutes les fonctions
(différenciation de <code>na.rm.group</code> et
<code>na.rm.facet</code>, introduction de <code>na.rm.var</code> pour
<code><a href="../reference/distrib_group_discrete.html">distrib_group_d()</a></code> et <code><a href="../reference/distrib_discrete.html">distrib_d()</a></code>).</li>
<li>Ajout de checks pour vérifier si la couleur/palette est valide :
couleur/palette par défaut si la couleur introduite est invalide.</li>
<li>Création d’une fonction interne de création de palettes, permettant
de produire les palettes de différentes institutions (pour l’instant
Vivalis et Perspective, pour tester).</li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-2-10">fonctionr 0.2.10<a class="anchor" aria-label="anchor" href="#fonctionr-0-2-10"></a>
</h2>
<p>Date : 2024-03-15</p>
<ul>
<li>Ajout des argument <code>na.rm.facet</code> dans
<code><a href="../reference/prop_group.html">prop_group()</a></code> et <code><a href="../reference/central_group.html">central_group()</a></code>.</li>
<li>Possibilité de mettre une couleur unie pour
<code><a href="../reference/many_val.html">many_val()</a></code>.</li>
<li>Création de l’argument <code>na.vars</code> pour
<code><a href="../reference/many_val.html">many_val()</a></code> et <code><a href="../reference/many_val_group.html">many_val_group()</a></code>.</li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-2-9">fonctionr 0.2.9<a class="anchor" aria-label="anchor" href="#fonctionr-0-2-9"></a>
</h2>
<p>Date : 2024-03-05</p>
<ul>
<li>Ajout des palettes dans <code><a href="../reference/many_val.html">many_val()</a></code>.</li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-2-8">fonctionr 0.2.8<a class="anchor" aria-label="anchor" href="#fonctionr-0-2-8"></a>
</h2>
<p>Date : 2024-03-03</p>
<ul>
<li>Modification des checks pour voir si les variables indispensables
existent bien dans <code>data</code> : simplification du code et message
plus clair et utile pour l’utilisateur.</li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-2-7">fonctionr 0.2.7<a class="anchor" aria-label="anchor" href="#fonctionr-0-2-7"></a>
</h2>
<p>Date : 2024-03-01</p>
<ul>
<li>Ajout de <code><a href="../reference/many_val.html">many_val()</a></code> comme fonction plus générale qui
englobe <code><a href="../reference/many_val.html">many_prop()</a></code>. Il y a désormais la possibilité de
calculer des moyennes et des médianes avec les alias
<code><a href="../reference/many_val.html">many_mean()</a></code> et <code><a href="../reference/many_val.html">many_median()</a></code>.</li>
<li>Plus de parcimonie pour l’import des packages extérieurs dans le
namespace.</li>
<li>Changement de nom des arguments : <code>na.var</code> devient
<code>na.prop</code> et <code>facet.var</code> devient
<code>facet</code>.</li>
<li>Début de simplification du code dans un but de facilité pour la
maintenance et les modifs futures.</li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-2-6">fonctionr 0.2.6<a class="anchor" aria-label="anchor" href="#fonctionr-0-2-6"></a>
</h2>
<p>Date : 2024-02-22</p>
<ul>
<li>Ajout d’un check de l’expression dans <code><a href="../reference/prop_group.html">prop_group()</a></code>,
évitant de produire des résultats incohérents.</li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-2-5">fonctionr 0.2.5<a class="anchor" aria-label="anchor" href="#fonctionr-0-2-5"></a>
</h2>
<p>Date : 2024-02-19</p>
<ul>
<li>Implémentation du <code>trycatch()</code> sur le test statistique
dans <code><a href="../reference/prop_group.html">prop_group()</a></code> : le test statistique est désormais
bypassé si les conditions ne sont pas remplies et ne stoppe donc plus
<code><a href="../reference/prop_group.html">prop_group()</a></code> en cas d’erreur.</li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-2-4">fonctionr 0.2.4<a class="anchor" aria-label="anchor" href="#fonctionr-0-2-4"></a>
</h2>
<p>Date : 2024-02-17</p>
<ul>
<li>Implémentation de checks pour vérifier que les variables de
<code><a href="../reference/many_val_group.html">many_prop_group()</a></code> soient bien binaires, et pour éviter les
variables à une modalité pour <code>quali_var</code> dans
<code><a href="../reference/distrib_group_discrete.html">distrib_group_discrete()</a></code>.</li>
<li>Correction d’un bug dans <code><a href="../reference/esth_graph.html">esth_graph()</a></code>.</li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-2-3">fonctionr 0.2.3<a class="anchor" aria-label="anchor" href="#fonctionr-0-2-3"></a>
</h2>
<p>Date : 2024-02-17</p>
<ul>
<li>Implémentation de l’export excel pour <code><a href="../reference/many_val.html">many_prop()</a></code> et
<code><a href="../reference/many_val_group.html">many_val_group()</a></code>.</li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-2-2">fonctionr 0.2.2<a class="anchor" aria-label="anchor" href="#fonctionr-0-2-2"></a>
</h2>
<p>Date : 2024-02-14</p>
<ul>
<li><p>Implémentation du test statistique pour
<code><a href="../reference/distrib_discrete.html">distrib_discrete()</a></code>.</p></li>
<li><p>Correction d’un bug découvert à cette occasion, qui empêchait de
faire fonctionner <code><a href="../reference/distrib_discrete.html">distrib_discrete()</a></code> avec
<code>na.rm.group = FALSE</code>.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-2-1">fonctionr 0.2.1<a class="anchor" aria-label="anchor" href="#fonctionr-0-2-1"></a>
</h2>
<p>Date : 2024-02-14</p>
<ul>
<li>Amélioration des fonctions internes de vérification de la validité
des arguments. Celles-ci renvoient désormais un message plus clair pour
l’utilisateur.</li>
</ul>
</div>
<div class="section level2">
<h2 id="fonctionr-0-2-0">fonctionr 0.2.0<a class="anchor" aria-label="anchor" href="#fonctionr-0-2-0"></a>
</h2>
<ul>
<li><p><code><a href="../reference/prop_group.html">prop_group()</a></code> : ajout de la possibilité de calculer
des proportions en comptant les <code>NA</code> au dénominateur avec
l’argument <code>na.var = "include"</code>. Dans ce cas, l’expression
<code>prop_exp</code> peut contenir la fonction <code><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na()</a></code>
pour calculer la proportion de valeurs manquantes.</p></li>
<li><p><code><a href="../reference/many_val_group.html">many_val_group()</a></code> : changement de l’ordre des labels
pour que l’ordre des couleurs corresponde à l’ordre sur le
graphique.</p></li>
<li><p>Ajout d’exemples dans la documentation à partir des données SILC
inclues dans le package laeken.</p></li>
<li><p>Correction de bugs mineurs.</p></li>
</ul>
</div>
<div class="section level2" style="border:1px; background-color:#f8f5e4; padding: 5px 10px 10px 10px; margin-bottom: 10px">
<h2 id="to-do-list">To do list<a class="anchor" aria-label="anchor" href="#to-do-list"></a>
</h2>
<div class="section level3">
<h3 id="prioritaire-nécessités-ou-bugs">Prioritaire (nécessités ou bugs)<a class="anchor" aria-label="anchor" href="#prioritaire-n%C3%A9cessit%C3%A9s-ou-bugs"></a>
</h3>
<div class="section level4">
<h4 id="en-général">En général<a class="anchor" aria-label="anchor" href="#en-g%C3%A9n%C3%A9ral"></a>
</h4>
<ul>
<li><p>L’utilisation de <code>ggtext</code> a été implémentée de manière
un peu bricolée (comme un code en “surcouche”). Ça fonctionne, mais le
code est largement simplifiable (mieux pour la lisibilité). Si on
l’implémente de manière durable, à revoir.</p></li>
<li><p>BUG : si une variable de design == le nom d’un objet externe, ça
fonctionne =&gt; APPROFONDIR ET REGLER CA ?</p></li>
<li><p>Rendre l’usage non interactif (= la programmation via d’autres
fonctions) possible =&gt; gros travail, usage de <code>rlang</code> à la
place de <code><a href="https://rdrr.io/r/base/substitute.html" class="external-link">substitute()</a></code>.</p></li>
<li><p>Les couleurs des palettes sont attachées au groupe
(<code><a href="../reference/many_val_group.html">many_val_group()</a></code>) ou à l’indicateur
(<code><a href="../reference/many_val.html">many_val()</a></code>), mais pas à la position. De ce fait, lorsque
<code>reorder = T</code>, l’ordre des couleurs de la palette n’est pas
respecté <strong>=&gt; changer le comportement ?</strong></p></li>
<li><p>Bug à l’import de <code>fonctionr</code> du fait de collision
entre <code>MetBrewer</code>, <code>MoMAColors</code>,
<code>PrettyCols</code> et les fonctions de base ? Je ne comprends pas
le message.</p></li>
<li><p>Documenter tous les arguments des différentes fonctions +
vérifier que les explications sont bien correctes (quelques erreurs, par
ex. à cause de copier-coller ou de l’ajout de nouveaux argument avec la
nouvelle logique des na.rm). Voir ici pour savoir les différentes
options possibles dans la doc : <a href="#id_0" class="uri">https://r-pkgs.org/man.html</a>.</p></li>
<li><p>Vérifier que les scripts sont bien commentés pour qu’on se
rappelle ce qu’on a fait (il manque des notes et quelques explications
d’opérations dont je ne me rappelle plus le but).</p></li>
<li><p>Passer le code de chaque fonction en revue pour cleaner /
harmoniser / simplifier.<br><em>=&gt; En cours : il faut encore checker le code du graphique
ggplot.<br>
=&gt; L’ajout de <code>ggtext</code> pour mettre le total en gras a
compliqué le code</em></p></li>
<li><p>Ajouter des exemples pour chaque fonction (pour le site) : manque
<code><a href="../reference/pivot_longer_survey.html">pivot_longer_survey()</a></code>, <code><a href="../reference/esth_graph.html">esth_graph()</a></code>.</p></li>
<li><p>Vérifier les messages à l’utilisateur : voir quoi garder,
corriger, traduire, indiquer les accents (é, è…), ajouter des guillemets
pour les arguments dans les checks, mieux écrire les résultats des tests
stat (on ne sait pas quelle est l’hypothèse nulle).<br><em>=&gt; Traduire ces messages selon la langue ? Ou tout en anglais
?</em></p></li>
<li><p>Mettre des conditions pour réaliser les tests (n min,
distribution, variances égales…).</p></li>
<li><p>Changer la fonction <code><a href="https://scales.r-lib.org/reference/pvalue_format.html" class="external-link">scales::pvalue</a></code>, qui n’est plus
valide (<code>superseded</code>) =&gt; Faire une fonction maison en
interne ?</p></li>
<li>
<p>Ajouter des checks pour les inputs :</p>
<ul>
<li>Pas mettre les mêmes colonnes dans les différents arguments ?
(<code>group</code>, <code>var_distrib</code>, <code>facet_var</code>,
etc.).</li>
</ul>
</li>
<li><p>Les cluster / strates / weights n’apparaissent pas dans le
message de la console avec les replicates =&gt; pourquoi ?</p></li>
</ul>
</div>
<div class="section level4">
<h4 id="distrib_c">
<strong>distrib_c</strong><a class="anchor" aria-label="anchor" href="#distrib_c"></a>
</h4>
<ul>
<li>Ajouter le test stat univarié avec comme H0 mu dans la population.
Apparemment la fonction n’est pas pré-programmée dans
<code>survey</code>, il faut la faire soi-même.</li>
<li>Ajouter la possibilité de facets.</li>
</ul>
</div>
<div class="section level4">
<h4 id="distrib_group_c">
<strong>distrib_group_c</strong><a class="anchor" aria-label="anchor" href="#distrib_group_c"></a>
</h4>
<ul>
<li><p>Le groupe <code>NA</code> est transfomé en level du facteur de
groupe. De ce fait, il n’apparaît pas toujours en dernier, notamment
lorsque <code>reorder = T</code>. Régler ça (pas cohérent avec les
autres fonctions).</p></li>
<li><p>Faire en sorte que le nom du groupe soit toujours le même dans
les sorties de la liste (pour le moment, parfois “group”, parfois le nom
de la variable) =&gt; implique de changer l’argument <code>by =</code>
des <code>left_join()</code> dans le script, et donc le nommage des
colonnes.</p></li>
<li><p>Ajouter la possibilité de facets.</p></li>
<li><p>La colonne <code>central</code> dans l’objet <code>dens</code>
produit n’a pas de valeur <code>y_ridges</code>.</p></li>
<li><p>Un peu cleaner le script : il y a des étapes inutiles qui
pourraient être simplifiées, notamment dans la création des valeurs
centrales.</p></li>
<li><p>Ajouter la possibilité d’un total.</p></li>
</ul>
</div>
<div class="section level4">
<h4 id="central_group">central_group<a class="anchor" aria-label="anchor" href="#central_group"></a>
</h4>
<ul>
<li>Bypasser l’erreur du test stat avec <code><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch()</a></code>.</li>
</ul>
</div>
<div class="section level4">
<h4 id="distrib_group_d">distrib_group_d<a class="anchor" aria-label="anchor" href="#distrib_group_d"></a>
</h4>
<ul>
<li>Implémenter un test stat lorsqu’il y a des facets =&gt; via
modélisation loglinéaire, mais j’ai un peu de mal à comprendre les
erreurs de <code>survey</code> (erreurs fréquentes).</li>
<li>Redondance du code avec total pour le <code>geom_text()</code>
?</li>
</ul>
</div>
<div class="section level4">
<h4 id="many_val_group">many_val_group<a class="anchor" aria-label="anchor" href="#many_val_group"></a>
</h4>
<ul>
<li>Améliorer l’alignement des effectifs avec <code>show_n = T</code>
lorsque <code>position == "stack"</code>
</li>
<li>Redondance du code avec total pour le <code>geom_text()</code>
?</li>
<li><strong>Fusionner <code><a href="../reference/many_val_group.html">many_val_group()</a></code> et
<code><a href="../reference/many_val.html">many_val()</a></code> !<br>
=&gt; + Ajouter la possibilité de group.fill pour les deux</strong></li>
</ul>
</div>
<div class="section level4">
<h4 id="make_surface">make_surface<a class="anchor" aria-label="anchor" href="#make_surface"></a>
</h4>
<ul>
<li><p>Ajouter la détection automatique des IC (possible si les colonnes
sont du même nom que la valeur, mais terminant par <code>_low</code> et
<code>_upp</code>).</p></li>
<li><p>Ajouter les checks (penser le cas spécifique de
<code>pvalue</code>).</p></li>
<li><p>Lorsque facet, mieux penser l’alignement entre mêmes modalités
?</p></li>
<li><p>Ajouter les arguments <code>dec</code> et éventuellement
<code>scales</code>.</p></li>
</ul>
</div>
<div class="section level4">
<h4 id="esth_graph">
<strong>esth_graph</strong><a class="anchor" aria-label="anchor" href="#esth_graph"></a>
</h4>
<ul>
<li><p>Changer le nom.</p></li>
<li><p>Ajouter le check pour l’argument <code>pvalue</code>.</p></li>
<li><p>Régler le pb si multiples <code>NA</code> + voir si un pb se pose
avec multiples totaux.<br>
=&gt; BUG : la condition stoppe si multiples <code>NAs</code> avec
facettes même si 1 seul <code>NA</code> par facette (condition trop
stricte =&gt; ça doit passer)</p></li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="améliorations">Améliorations<a class="anchor" aria-label="anchor" href="#am%C3%A9liorations"></a>
</h3>
<div class="section level4">
<h4 id="en-général-1">En général<a class="anchor" aria-label="anchor" href="#en-g%C3%A9n%C3%A9ral-1"></a>
</h4>
<ul>
<li>Faire une fonction commune pour la création de palettes + checks
=&gt; redondance inutile entre les fonctions.</li>
<li>Réécrire le code du test pour avoir la formule originale =&gt;
possible avec <code><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval()</a></code>, voir code de
<code><a href="../reference/central_group.html">central_group()</a></code>.</li>
<li>Voir si on peut créer une fonction commune à toutes les fonctions du
package pour créer le ggplot =&gt; ce serait une large simplification.
Pour l’instant, il y a déjà un thème commun
<code>theme_fonctionr</code>.</li>
<li>Créer une fonction de check des inputs indispensables (car
redondance entre les 4 fonctions)<br><em>=&gt; Pour l’instant c’est fait “en dur” : difficultés de créer une
fonction du fait de l’usage du tidyverse : il faut sans doute utiliser
les fonctions de <code>rlang</code>.</em>
</li>
<li>L’import des packages peut être optimisé : il n’est pas utile
d’importer des packages extérieurs <u>entiers</u> dans le NAMESPACE,
cela augmente le risque de collisions de noms de fonctions =&gt; un bon
résumé ici : <a href="#id_0" class="uri">https://mdneuzerling.com/post/what-ive-learnt-about-making-an-r-package/</a>
et pour plus de détails : <a href="#id_0" class="uri">https://r-pkgs.org/dependencies-in-practice.html</a>.<br><strong><em>=&gt; A faire : importer seulement les fonctions utiles
(mutate, select, etc.).</em></strong>
</li>
</ul>
</div>
<div class="section level4">
<h4 id="distrib_group_d-1">distrib_group_d<a class="anchor" aria-label="anchor" href="#distrib_group_d-1"></a>
</h4>
<ul>
<li><p>Ajouter les n par “cellule” ?</p></li>
<li><p>Ajouter les effectifs totaux par groupe ? (dans le nom du groupe
?)</p></li>
<li><p>Réordonner les levels sur la variable <code>group</code> ? Mais
selon quelle valeur (vu qu’il y en a plusieurs) ? Celle du premier level
de la variable <code>var_distrib</code> ?</p></li>
<li><p>Possibilité d’indiquer un vecteur avec une palette de couleur
?</p></li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="notes">Notes<a class="anchor" aria-label="anchor" href="#notes"></a>
</h3>
<div class="section level4">
<h4 id="filtrage">Filtrage<a class="anchor" aria-label="anchor" href="#filtrage"></a>
</h4>
<p>Il semble qu’il faille filtrer après la déclaration du design. Si on
ne le fait pas, on considère le design sur l’objet filtré (avec moins de
PSU / strates qu’il y en a en réalité), ce qui sous-estime
potentiellement la distribution d’échantillonnage. Voir :</p>
<p><a href="https://stats.stackexchange.com/questions/411026/why-it-is-important-to-make-survey-design-object-svydesign-function-in-r-with-i" class="external-link uri">https://stats.stackexchange.com/questions/411026/why-it-is-important-to-make-survey-design-object-svydesign-function-in-r-with-i</a></p>
<p><a href="https://notstatschat.rbind.io/2021/07/22/subsets-and-subpopulations-in-survey-inference/" class="external-link uri">https://notstatschat.rbind.io/2021/07/22/subsets-and-subpopulations-in-survey-inference/</a></p>
<p><em>=&gt; De ce fait, j’ai inclus une option de filtre (filter_exp)
dans les fonctions (qui filtre après la déclaration du design), qui
évite de filtrer l’objet avant en dégradant le design. =&gt; Vérifier
que c’est bien OK ! <u>A FAIRE : expliquer dans la doc !</u></em></p>
</div>
</div>
<div class="section level3">
<h3 id="fonctions-à-créer">Fonctions à créer<a class="anchor" aria-label="anchor" href="#fonctions-%C3%A0-cr%C3%A9er"></a>
</h3>
<div class="section level4">
<h4 id="bivarié-ou-3-variables">Bivarié ou 3 variables+<a class="anchor" aria-label="anchor" href="#bivari%C3%A9-ou-3-variables"></a>
</h4>
<ul>
<li><p>Superposition de 2 statistiques (bar + lines) avec échelles
différentes.</p></li>
<li><p>Tableau croisé avec résidus ou couleur par proportion
(proportions par c, l, ou total)</p></li>
</ul>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Joel Gires, Francois Ghesquiere.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
